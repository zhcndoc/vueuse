import{bt as e,yt as t}from"./vue.CAJL2k56.js";import{n}from"./general.BbmBTXVB.js";import{t as r}from"./useEventListener.c80kvxRv.js";import{n as i}from"./configurable.CHIFr4yg.js";import{t as a}from"./useSupported.wZzSDbHl.js";function o(o,s={}){let{controls:c=!1,navigator:l=i}=s,u=a(()=>l&&`permissions`in l),d=t(),f=typeof o==`string`?{name:o}:o,p=t(),m=()=>{p.value=d.value?.state??`prompt`};r(d,`change`,m,{passive:!0});let h=n(async()=>{if(u.value){if(!d.value)try{d.value=await l.permissions.query(f)}catch{d.value=void 0}finally{m()}if(c)return e(d.value)}});return h(),c?{state:p,isSupported:u,query:h}:p}export{o as t};