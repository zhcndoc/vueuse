import{dt as e,et as t,gt as n,y as r,yt as i}from"./vue.CAJL2k56.js";import{s as a}from"./is.CbRwWVeh.js";function o(o,s,c){let l;l=e(c)?{evaluating:c}:c||{};let{lazy:u=!1,flush:d=`sync`,evaluating:f=void 0,shallow:p=!0,onError:m=globalThis.reportError??a}=l,h=i(!u),g=p?i(s):n(s),_=0;return t(async e=>{if(!h.value)return;_++;let t=_,n=!1;f&&Promise.resolve().then(()=>{f.value=!0});try{let r=await o(t=>{e(()=>{f&&(f.value=!1),n||t()})});t===_&&(g.value=r)}catch(e){m(e)}finally{f&&t===_&&(f.value=!1),n=!0}},{flush:d}),u?r(()=>(h.value=!0,g.value)):g}export{o as t};