import{Q as e,tS as t,v as n}from"./vue.DLm9j74-.js";import{t as r}from"./tryOnScopeDispose.52c2sqvU.js";import{c as i}from"./is.J6NoNqY_.js";import{d as a}from"./general.CPMlYMV9.js";import{r as o}from"./configurable.DuBTHq8T.js";import{t as s}from"./unrefElement.BPPQrlgs.js";import{t as c}from"./useSupported.O3lMHp1K.js";function l(l,u,d={}){let{window:f=o,...p}=d,m,h=c(()=>f&&`MutationObserver`in f),g=()=>{m&&=(m.disconnect(),void 0)},_=n(()=>{let e=t(l),n=a(e).map(s).filter(i);return new Set(n)}),v=e(_,e=>{g(),h.value&&e.size&&(m=new MutationObserver(u),e.forEach(e=>m.observe(e,p)))},{immediate:!0,flush:`post`}),y=()=>m?.takeRecords(),b=()=>{v(),g()};return r(b),{isSupported:h,stop:b,takeRecords:y}}export{l as t};