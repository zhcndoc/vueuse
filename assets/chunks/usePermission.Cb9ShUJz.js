import{tv as e,ty as t}from"./vue.DLm9j74-.js";import{n}from"./general.CPMlYMV9.js";import{t as r}from"./useEventListener.Cti38iiT.js";import{n as i}from"./configurable.DuBTHq8T.js";import{t as a}from"./useSupported.O3lMHp1K.js";function o(o,s={}){let{controls:c=!1,navigator:l=i}=s,u=a(()=>l&&`permissions`in l),d=e(),f=typeof o==`string`?{name:o}:o,p=e(),m=()=>{p.value=d.value?.state??`prompt`};r(d,`change`,m,{passive:!0});let h=n(async()=>{if(u.value){if(!d.value)try{d.value=await l.permissions.query(f)}catch{d.value=void 0}finally{m()}if(c)return t(d.value)}});return h(),c?{state:p,isSupported:u,query:h}:p}export{o as t};