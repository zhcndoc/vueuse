import{C as e,Ct as t,H as n,O as r,Ot as i,b as a,bt as o,g as s,gt as c,p as l,rt as u,wt as d,yt as f}from"./vue.CAJL2k56.js";import{n as p,t as m}from"./browser.Dvv_YeiO.js";import{t as h}from"./watchPausable.CLZhH2ih.js";function g(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function _(e,t){let n,r=()=>{if(n)return n;let r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),n=g(r),n.then(e=>{e.onclose=()=>n=void 0},()=>{}),n};return(e,n)=>r().then(r=>n(r.transaction(t,e).objectStore(t)))}var v;function y(){return v||=_(`keyval-store`,`keyval`),v}function b(e,t=y()){return t(`readonly`,t=>g(t.get(e)))}function x(e,t,n=y()){return n(`readwrite`,n=>(n.put(t,e),g(n.transaction)))}function S(e,t,n=y()){return n(`readwrite`,n=>new Promise((r,i)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),r(g(n.transaction))}catch(e){i(e)}}}))}function C(e,t=y()){return t(`readwrite`,t=>(t.delete(e),g(t.transaction)))}function w(e,n,r={}){let{flush:i=`pre`,deep:a=!0,shallow:s=!1,onError:l=e=>{console.error(e)},writeDefaults:u=!0,serializer:d={read:e=>e,write:e=>e}}=r,p=f(!1),m=(s?f:c)(n),g=t(n);async function _(){try{let t=await b(e);t===void 0?g!=null&&u&&await x(e,d.write(g)):m.value=d.read(t)}catch(e){l(e)}p.value=!0}_();async function v(){try{if(m.value==null)await C(e);else{let t=o(m.value),n=d.write(t);await S(e,()=>n)}}catch(e){l(e)}}let{pause:y,resume:w}=h(m,()=>v(),{flush:i,deep:a});async function T(e){y(),m.value=e,await v(),w()}return{set:T,isFinished:p,data:m}}var T={lang:`json`},E={lang:`json`},D=`vue-use-idb-keyval`,O=r({__name:`demo.client`,setup(t){let r=p(e=>m.stringify(e,(e,t)=>{if(typeof t!=`function`)return t},{singleQuote:!0,flowCollectionPadding:!1})),o=w(`${D}-object`,{name:`Banana`,color:`Yellow`,size:`Medium`,count:0}),c=r(o.data),f=w(`${D}-string`,`foobar`),h=f,g=w(`${D}-array`,[`foo`,`bar`,`baz`]),_=r(g.data);return(t,r)=>(n(),e(s,null,[r[8]||=a(`h5`,null,`Object`,-1),u(a(`input`,{"onUpdate:modelValue":r[0]||=e=>d(o).data.value.name=e,type:`text`},null,512),[[l,d(o).data.value.name]]),u(a(`input`,{"onUpdate:modelValue":r[1]||=e=>d(o).data.value.color=e,type:`text`},null,512),[[l,d(o).data.value.color]]),u(a(`input`,{"onUpdate:modelValue":r[2]||=e=>d(o).data.value.size=e,type:`text`},null,512),[[l,d(o).data.value.size]]),u(a(`input`,{"onUpdate:modelValue":r[3]||=e=>d(o).data.value.count=e,type:`range`,min:`0`,step:`0.01`,max:`1000`},null,512),[[l,d(o).data.value.count,void 0,{number:!0}]]),a(`pre`,T,i(d(c)),1),r[9]||=a(`br`,null,null,-1),r[10]||=a(`h5`,null,`String`,-1),u(a(`input`,{"onUpdate:modelValue":r[4]||=e=>d(f).data.value=e,type:`text`},null,512),[[l,d(f).data.value]]),a(`pre`,null,i(d(h)),1),r[11]||=a(`br`,null,null,-1),r[12]||=a(`h5`,null,`Array`,-1),u(a(`input`,{"onUpdate:modelValue":r[5]||=e=>d(g).data.value[0]=e,type:`text`},null,512),[[l,d(g).data.value[0]]]),u(a(`input`,{"onUpdate:modelValue":r[6]||=e=>d(g).data.value[1]=e,type:`text`},null,512),[[l,d(g).data.value[1]]]),u(a(`input`,{"onUpdate:modelValue":r[7]||=e=>d(g).data.value[2]=e,type:`text`},null,512),[[l,d(g).data.value[2]]]),a(`pre`,E,i(d(_)),1)],64))}});export{O as default};