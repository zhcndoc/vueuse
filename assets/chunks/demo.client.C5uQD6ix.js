import{D as e,S as t,V as n,f as r,h as i,tC as a,tD as o,tS as s,th as c,tn as l,tv as u,ty as d,y as f}from"./vue.DLm9j74-.js";import"./is.J6NoNqY_.js";import"./toRef.BNr2Rxs5.js";import"./filters.CUMa_U49.js";import{n as p,t as m}from"./browser.Bfe5jVnv.js";import"./watchWithFilter.DZ5NXp2w.js";import{n as h}from"./watchPausable.C0q9cU2I.js";function g(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function _(e,t){let n,r=()=>{if(n)return n;let r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),n=g(r),n.then(e=>{e.onclose=()=>n=void 0},()=>{}),n};return(e,n)=>r().then(r=>n(r.transaction(t,e).objectStore(t)))}var v;function y(){return v||=_(`keyval-store`,`keyval`),v}function b(e,t=y()){return t(`readonly`,t=>g(t.get(e)))}function x(e,t,n=y()){return n(`readwrite`,n=>(n.put(t,e),g(n.transaction)))}function S(e,t,n=y()){return n(`readwrite`,n=>new Promise((r,i)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),r(g(n.transaction))}catch(e){i(e)}}}))}function C(e,t=y()){return t(`readwrite`,t=>(t.delete(e),g(t.transaction)))}function w(e,t,n={}){let{flush:r=`pre`,deep:i=!0,shallow:a=!1,onError:o=e=>{console.error(e)},writeDefaults:l=!0,serializer:f={read:e=>e,write:e=>e}}=n,p=u(!1),m=(a?u:c)(t),g=s(t);async function _(){try{let t=await b(e);if(t===void 0){if(g!=null&&l){let t=f.write(g);await x(e,t)}}else m.value=f.read(t)}catch(e){o(e)}p.value=!0}_();async function v(){try{if(m.value==null)await C(e);else{let t=d(m.value),n=f.write(t);await S(e,()=>n)}}catch(e){o(e)}}let{pause:y,resume:w}=h(m,()=>v(),{flush:r,deep:i});async function T(e){y(),m.value=e,await v(),w()}return{set:T,isFinished:p,data:m}}var T={lang:`json`},E={lang:`json`},D=`vue-use-idb-keyval`,O=e({__name:`demo.client`,setup(e){let s=p(e=>m.stringify(e,(e,t)=>{if(typeof t!=`function`)return t},{singleQuote:!0,flowCollectionPadding:!1})),c=w(`${D}-object`,{name:`Banana`,color:`Yellow`,size:`Medium`,count:0}),u=s(c.data),d=w(`${D}-string`,`foobar`),h=d,g=w(`${D}-array`,[`foo`,`bar`,`baz`]),_=s(g.data);return(e,s)=>(n(),t(i,null,[s[8]||=f(`h5`,null,`Object`,-1),l(f(`input`,{"onUpdate:modelValue":s[0]||=e=>a(c).data.value.name=e,type:`text`},null,512),[[r,a(c).data.value.name]]),l(f(`input`,{"onUpdate:modelValue":s[1]||=e=>a(c).data.value.color=e,type:`text`},null,512),[[r,a(c).data.value.color]]),l(f(`input`,{"onUpdate:modelValue":s[2]||=e=>a(c).data.value.size=e,type:`text`},null,512),[[r,a(c).data.value.size]]),l(f(`input`,{"onUpdate:modelValue":s[3]||=e=>a(c).data.value.count=e,type:`range`,min:`0`,step:`0.01`,max:`1000`},null,512),[[r,a(c).data.value.count,void 0,{number:!0}]]),f(`pre`,T,o(a(u)),1),s[9]||=f(`br`,null,null,-1),s[10]||=f(`h5`,null,`String`,-1),l(f(`input`,{"onUpdate:modelValue":s[4]||=e=>a(d).data.value=e,type:`text`},null,512),[[r,a(d).data.value]]),f(`pre`,null,o(a(h)),1),s[11]||=f(`br`,null,null,-1),s[12]||=f(`h5`,null,`Array`,-1),l(f(`input`,{"onUpdate:modelValue":s[5]||=e=>a(g).data.value[0]=e,type:`text`},null,512),[[r,a(g).data.value[0]]]),l(f(`input`,{"onUpdate:modelValue":s[6]||=e=>a(g).data.value[1]=e,type:`text`},null,512),[[r,a(g).data.value[1]]]),l(f(`input`,{"onUpdate:modelValue":s[7]||=e=>a(g).data.value[2]=e,type:`text`},null,512),[[r,a(g).data.value[2]]]),f(`pre`,E,o(a(_)),1)],64))}});export{O as default};