import{Q as e,v as t}from"./vue.DLm9j74-.js";import{t as n}from"./toRef.BNr2Rxs5.js";import{t as r}from"./tryOnMounted.CJs_r5qD.js";import{r as i}from"./configurable.DuBTHq8T.js";import{t as a}from"./unrefElement.BPPQrlgs.js";import{n as o,t as s}from"./useStorage.DkJc_SLf.js";import{t as c}from"./usePreferredDark.CFRlfpCX.js";var l=`*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}`;function u(u={}){let{selector:d=`html`,attribute:f=`class`,initialValue:p=`auto`,window:m=i,storage:h,storageKey:g=`vueuse-color-scheme`,listenToStorageChanges:_=!0,storageRef:v,emitAuto:y,disableTransition:b=!0}=u,x={auto:``,light:`light`,dark:`dark`,...u.modes||{}},S=c({window:m}),C=t(()=>S.value?`dark`:`light`),w=v||(g==null?n(p):s(g,p,h,{window:m,listenToStorageChanges:_})),T=t(()=>w.value===`auto`?C.value:w.value),E=o(`updateHTMLAttrs`,(e,t,n)=>{let r=typeof e==`string`?m?.document.querySelector(e):a(e);if(!r)return;let i=new Set,o=new Set,s=null;if(t===`class`){let e=n.split(/\s/g);Object.values(x).flatMap(e=>(e||``).split(/\s/g)).filter(Boolean).forEach(t=>{e.includes(t)?i.add(t):o.add(t)})}else s={key:t,value:n};if(i.size===0&&o.size===0&&s===null)return;let c;b&&(c=m.document.createElement(`style`),c.appendChild(document.createTextNode(l)),m.document.head.appendChild(c));for(let e of i)r.classList.add(e);for(let e of o)r.classList.remove(e);s&&r.setAttribute(s.key,s.value),b&&(m.getComputedStyle(c).opacity,document.head.removeChild(c))});function D(e){E(d,f,x[e]??e)}function O(e){u.onChanged?u.onChanged(e,D):D(e)}e(T,O,{flush:`post`,immediate:!0}),r(()=>O(T.value));let k=t({get(){return y?w.value:T.value},set(e){w.value=e}});return Object.assign(k,{store:w,system:C,state:T})}export{u as t};