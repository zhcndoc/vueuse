import{D as e,G as t,K as n,S as r,T as i,V as a,b as o,h as s,tC as c,tD as l,th as u,tt as d,tw as f,tx as p,v as m,w as h,y as g}from"./vue.DLm9j74-.js";import"./tryOnScopeDispose.52c2sqvU.js";import{t as _}from"./createEventHook.DjKBYIH4.js";import"./is.J6NoNqY_.js";import"./general.CPMlYMV9.js";import{t as ee}from"./tryOnMounted.CJs_r5qD.js";import{t as v}from"./useEventListener.Cti38iiT.js";import{n as te}from"./configurable.DuBTHq8T.js";import"./unrefElement.BPPQrlgs.js";import"./useMounted.CuhcSusG.js";import{t as y}from"./useSupported.O3lMHp1K.js";import{t as b}from"./useRafFn.BeeOZqzG.js";function x(e){return m(()=>e.value?{buttons:{a:e.value.buttons[0],b:e.value.buttons[1],x:e.value.buttons[2],y:e.value.buttons[3]},bumper:{left:e.value.buttons[4],right:e.value.buttons[5]},triggers:{left:e.value.buttons[6],right:e.value.buttons[7]},stick:{left:{horizontal:e.value.axes[0],vertical:e.value.axes[1],button:e.value.buttons[10]},right:{horizontal:e.value.axes[2],vertical:e.value.axes[3],button:e.value.buttons[11]}},dpad:{up:e.value.buttons[12],down:e.value.buttons[13],left:e.value.buttons[14],right:e.value.buttons[15]},back:e.value.buttons[8],start:e.value.buttons[9]}:null)}function S(e={}){let{navigator:t=te}=e,n=y(()=>t&&`getGamepads`in t),r=u([]),i=_(),a=_(),o=e=>{let t=[],n=`vibrationActuator`in e?e.vibrationActuator:null;return n&&t.push(n),e.hapticActuators&&t.push(...e.hapticActuators),{id:e.id,index:e.index,connected:e.connected,mapping:e.mapping,timestamp:e.timestamp,vibrationActuator:e.vibrationActuator,hapticActuators:t,axes:e.axes.map(e=>e),buttons:e.buttons.map(e=>({pressed:e.pressed,touched:e.touched,value:e.value}))}},{isActive:s,pause:c,resume:l}=b(()=>{let e=t?.getGamepads()||[];for(let t of e)t&&r.value[t.index]&&(r.value[t.index]=o(t))}),d=e=>{r.value.some(({index:t})=>t===e.index)||(r.value.push(o(e)),i.trigger(e.index)),l()},f=e=>{r.value=r.value.filter(t=>t.index!==e.index),a.trigger(e.index)},p={passive:!0};return v(`gamepadconnected`,e=>d(e.gamepad),p),v(`gamepaddisconnected`,e=>f(e.gamepad),p),ee(()=>{let e=t?.getGamepads()||[];for(let t of e)t&&r.value[t.index]&&d(t)}),c(),{isSupported:n,onConnected:i.on,onDisconnected:a.on,gamepads:r,pause:c,resume:l,isActive:s}}var C={class:`fill-transparent`,width:`100%`,height:`100%`,viewBox:`0 0 404 309`},w={transform:`matrix(1,0,0,1,-50.8086,-83.6438)`},T={transform:`matrix(0.707107,-0.707107,0.707107,0.707107,-39.0605,310.248)`},E={id:`x`,transform:`matrix(1.23827,0,0,1.35378,-87.498,-88.0679)`},D={id:`a`,transform:`matrix(7.58222e-17,-1.23827,1.35378,8.28952e-17,64.6304,644.745)`},O={id:`b`,transform:`matrix(-1.23827,-1.51644e-16,1.6579e-16,-1.35378,797.443,492.617)`},k={id:`y`,transform:`matrix(-2.27467e-16,1.23827,-1.35378,-2.48686e-16,645.315,-240.196)`},A={transform:`matrix(1.12514,0,0,1.16981,-24.6477,-37.4718)`},j={"clip-path":`url(#_clip1)`},M={id:`left-joystick`,transform:`matrix(1.50628,0,0,1.50219,-76.2512,-107.713)`},N=[`cx`,`cy`],P={id:`select`,transform:`matrix(0.36945,-4.30683e-33,-4.30683e-33,0.384118,167.379,123.87)`},F={id:`start`,transform:`matrix(0.36945,-4.30683e-33,-4.30683e-33,0.384118,224.659,123.87)`},I={transform:`matrix(1.12514,0,0,1.16981,129.019,24.1131)`},L={"clip-path":`url(#_clip2)`},R={id:`right-joystick`,transform:`matrix(1.50628,0,0,1.50219,-76.2512,-107.713)`},z=[`cx`,`cy`],B={transform:`matrix(1.12514,0,0,1.16981,26.3142,27.0123)`},V={"clip-path":`url(#_clip3)`},H={id:`dpad-left`,transform:`matrix(0.778202,-0.748486,0.850796,0.818307,-304.224,296.899)`},ne={id:`dpad-down`,transform:`matrix(-0.778202,-0.748486,0.850796,-0.818307,251.925,647.9)`},U={id:`dpad-right`,transform:`matrix(-0.778202,0.748486,-0.850796,-0.818307,616.861,112.988)`},W={id:`dpad-up`,transform:`matrix(0.778202,0.748486,-0.850796,0.818307,60.7122,-238.013)`},G={id:`rb`,transform:`matrix(0.61812,0.0171064,-0.0276642,0.999617,259.736,-3.21975)`},K={id:`rt`,transform:`matrix(0.716144,0.0198192,-0.0244414,0.883165,143.069,9.76017)`},q={transform:`matrix(-1,0,0,1,497.232,0)`},J={id:`lb`,transform:`matrix(0.61812,0.0171064,-0.0276642,0.999617,259.736,-3.21975)`},Y={id:`lt`,transform:`matrix(0.716144,0.0198192,-0.0244414,0.883165,143.069,9.76017)`},X=e({__name:`Controller`,props:{gamepad:{}},setup(e){let{gamepad:t}=p(e),n=x(t),i=m(()=>n.value?Math.abs(n.value?.stick.left.horizontal)>.075||Math.abs(n.value?.stick.left.vertical)>.075:!1),o=m(()=>n.value?Math.abs(n.value?.stick.right.horizontal)>.075||Math.abs(n.value?.stick.right.vertical)>.075:!1);return(e,t)=>(a(),r(`svg`,C,[g(`g`,w,[t[9]||=g(`g`,{id:`path0`,transform:`matrix(1,0,0,1,52.8068,121.322)`},[g(`path`,{d:`M124.603,200L275.208,200L283.765,204.454C288.472,206.904 292.575,209.243 292.883,209.652C293.191,210.062 295.844,212.115 298.778,214.215C303.722,217.753 325.923,239.273 336.093,250.386C348.994,264.484 358.283,270.225 364.791,268.122C384.435,261.775 396.206,246.336 399.096,223.126C400.356,213 399.613,185.537 397.868,177.774C397.306,175.271 396.027,169.536 395.027,165.027C391.933,151.086 387.247,135.583 377.519,107.104C374.747,98.989 366.626,75.41 364.382,69.399C357.9,52.035 353.003,32.638 347.705,27.135C342.534,21.764 54.661,21.764 49.49,27.135C44.192,32.638 41.911,52.035 35.429,69.399C33.185,75.41 25.064,98.989 22.292,107.104C12.564,135.583 7.878,151.086 4.784,165.027C3.784,169.536 2.505,175.271 1.943,177.774C0.198,185.537 -0.545,213 0.715,223.126C3.605,246.336 15.376,261.775 35.02,268.122C41.528,270.225 50.817,264.484 63.718,250.386C73.888,239.273 96.089,217.753 101.033,214.215C103.967,212.115 106.62,210.062 106.928,209.652C107.236,209.243 111.339,206.904 116.046,204.454L124.603,200Z`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`4.17px`}})],-1),g(`g`,T,[g(`g`,E,[g(`path`,{class:f({"active-control":c(n)?.buttons.x.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,D,[g(`path`,{class:f({"active-control":c(n)?.buttons.a.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,O,[g(`path`,{class:f({"active-control":c(n)?.buttons.b.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,k,[g(`path`,{class:f({"active-control":c(n)?.buttons.y.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])]),g(`g`,A,[t[0]||=g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`}},null,-1),t[1]||=g(`clipPath`,{id:`_clip1`},[g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`})],-1),g(`g`,j,[g(`g`,M,[g(`ellipse`,{cx:154.401+(c(n)?.stick.left.horizontal||0)*4,cy:208.133+(c(n)?.stick.left.vertical||0)*4,rx:`15.341`,ry:`14.796`,class:f([`fill-transparent`,{"active-control":i.value}]),style:{stroke:`currentColor`,"stroke-width":`1.81px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,10,N)])]),t[2]||=g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`2.9px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,-1)]),g(`g`,null,[g(`g`,P,[g(`ellipse`,{class:f({"active-control":c(n)?.back.pressed}),cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{stroke:`currentColor`,"stroke-width":`8.29px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,F,[g(`ellipse`,{class:f({"active-control":c(n)?.start.pressed}),cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{stroke:`currentColor`,"stroke-width":`8.29px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])]),g(`g`,I,[t[3]||=g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`}},null,-1),t[4]||=g(`clipPath`,{id:`_clip2`},[g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`})],-1),g(`g`,L,[g(`g`,R,[g(`ellipse`,{cx:154.401+(c(n)?.stick.right.horizontal||0)*4,cy:208.133+(c(n)?.stick.right.vertical||0)*4,rx:`15.341`,ry:`14.796`,class:f({"active-control":o.value}),style:{stroke:`currentColor`,"stroke-width":`1.81px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,10,z)])]),t[5]||=g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`2.9px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,-1)]),g(`g`,B,[t[6]||=g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`}},null,-1),t[7]||=g(`clipPath`,{id:`_clip3`},[g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`})],-1),g(`g`,V,[g(`g`,H,[g(`path`,{class:f({"active-control":c(n)?.dpad.left.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,ne,[g(`path`,{class:f({"active-control":c(n)?.dpad.down.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,U,[g(`path`,{class:f({"active-control":c(n)?.dpad.right.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,W,[g(`path`,{class:f({"active-control":c(n)?.dpad.up.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])]),t[8]||=g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`2.9px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,-1)]),t[10]||=g(`g`,{transform:`matrix(1.12514,0,0,1.16981,179.092,-37.4718)`},[g(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`2.9px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}})],-1),g(`g`,null,[g(`g`,null,[g(`g`,G,[g(`path`,{class:f({"active-control":c(n)?.bumper.right.pressed}),d:`M198.988,132.494C198.988,128.797 194.134,125.795 188.155,125.795L141.898,125.795C135.92,125.795 131.066,128.797 131.066,132.494C131.066,136.191 135.92,139.192 141.898,139.192L188.155,139.192C194.134,139.192 198.988,136.191 198.988,132.494Z`,style:{stroke:`currentColor`,"stroke-width":`4.01px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,K,[g(`path`,{class:f({"active-control":c(n)?.triggers.right.pressed}),d:`M321.473,92.294C321.473,84.798 313.967,78.712 304.723,78.712C295.478,78.712 287.973,84.798 287.973,92.294L287.973,114.931L321.473,114.931L321.473,92.294Z`,style:{stroke:`currentColor`,"stroke-width":`4.14px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])]),g(`g`,q,[g(`g`,J,[g(`path`,{class:f({"active-control":c(n)?.bumper.left.pressed}),d:`M198.988,132.494C198.988,128.797 194.134,125.795 188.155,125.795L141.898,125.795C135.92,125.795 131.066,128.797 131.066,132.494C131.066,136.191 135.92,139.192 141.898,139.192L188.155,139.192C194.134,139.192 198.988,136.191 198.988,132.494Z`,style:{stroke:`currentColor`,"stroke-width":`4.01px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),g(`g`,Y,[g(`path`,{class:f({"active-control":c(n)?.triggers.left.pressed}),d:`M321.473,92.294C321.473,84.798 313.967,78.712 304.723,78.712C295.478,78.712 287.973,84.798 287.973,92.294L287.973,114.931L321.473,114.931L321.473,92.294Z`,style:{stroke:`currentColor`,"stroke-width":`4.14px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])])])])]))}}),Z={flex:`~ col`},re={font:`medium mono`},ie={font:`medium`,text:`sm dark-50 opacity-80 dark:light-900 dark:opacity-50`},Q=e({__name:`Item`,props:{label:{}},setup(e){return(e,t)=>(a(),r(`div`,Z,[g(`span`,re,[n(e.$slots,`default`)]),g(`span`,ie,l(e.label),1)]))}}),ae={bg:`dark:dark-500 light-100`,shadow:`~ md`,border:`rounded`,"max-w":`screen-lg`,mx:`auto`,overflow:`hidden`,grid:`~`,class:`grid-cols-[2fr,1fr]`},oe={p:`4`},se={font:`medium`,text:`xl`},ce={flex:`~ row wrap`,gap:`x-4`,mt:`4`},le={flex:`~ row wrap`,gap:`y-4 x-4`,py:`2`},ue={flex:`~ row wrap`,gap:`y-4 x-4`,py:`2`},de=[`disabled`],fe={flex:`~ row shrink-none`,place:`items-center content-center`,p:`8`,bg:`dark:dark-900 light-400`},pe={key:1,"font-medium":``,text:`dark:light-900 dark:opacity-70`},$=e({__name:`Gamepad`,props:{gamepad:{}},setup(e){let n=e,c=m(()=>n.gamepad?.hapticActuators?.length>0);function u(){c.value&&n.gamepad.hapticActuators[0].playEffect(`dual-rumble`,{startDelay:0,duration:1e3,weakMagnitude:1,strongMagnitude:1})}return(e,n)=>(a(),r(`div`,ae,[g(`div`,oe,[g(`div`,se,l(e.gamepad.id),1),g(`div`,ce,[i(Q,{label:`Index`},{default:d(()=>[h(l(e.gamepad.index),1)]),_:1}),i(Q,{label:`Connected`},{default:d(()=>[h(l(e.gamepad.connected),1)]),_:1}),i(Q,{label:`Mapping`},{default:d(()=>[h(l(e.gamepad.mapping||`N/A`),1)]),_:1}),i(Q,{label:`Timestamp`},{default:d(()=>[h(l(e.gamepad.timestamp.toFixed(0)),1)]),_:1})]),n[0]||=g(`div`,{font:`medium`,mt:`4`},` Buttons `,-1),g(`div`,le,[(a(!0),r(s,null,t(e.gamepad.buttons,(e,t)=>(a(),o(Q,{key:t,p:`x-2 y-1`,border:`rounded`,bg:`dark:dark-700 light-500`,label:`B${t}`},{default:d(()=>[h(l(e.value.toFixed(2)),1)]),_:2},1032,[`label`]))),128))]),n[1]||=g(`div`,{font:`medium`,mt:`4`},` Axes `,-1),g(`div`,ue,[(a(!0),r(s,null,t(e.gamepad.axes,(e,t)=>(a(),o(Q,{key:t,p:`x-2 y-1`,border:`rounded`,bg:`dark:dark-700 light-500`,label:`Axis ${t}`},{default:d(()=>[h(l(e.toFixed(2)),1)]),_:2},1032,[`label`]))),128))]),g(`button`,{disabled:!c.value,onClick:u},` Vibrate `,8,de)]),g(`div`,fe,[e.gamepad.mapping===`standard`?(a(),o(X,{key:0,gamepad:e.gamepad,text:`dark-100 opacity-70 dark:light-900 dark:opacity-70`},null,8,[`gamepad`])):(a(),r(`span`,pe,` Unknown Controller Type `))])]))}}),me={key:0,flex:`~ row`,place:`items-center content-center`,items:`center`,space:`x-4`},he={key:1,flex:`~ row`,place:`items-center content-center`,items:`center`,space:`x-4`},ge={key:2,space:`y-4`},_e=e({__name:`demo.client`,setup(e){let{isSupported:n,gamepads:i}=S();return(e,l)=>(a(),r(`div`,null,[c(n)?c(i).length===0?(a(),r(`div`,he,[...l[1]||=[g(`i`,{"i-carbon-game-console":``,text:`5xl`,opacity:`50`},null,-1),g(`div`,{flex:`~ col`},[g(`span`,{text:`2xl`},`未检测到游戏手柄`),g(`span`,{opacity:`50`},`确保你的游戏手柄已连接，并按下按钮唤醒它。`)],-1)]])):(a(),r(`div`,ge,[(a(!0),r(s,null,t(c(i),e=>(a(),o($,{key:e.id,gamepad:e},null,8,[`gamepad`]))),128))])):(a(),r(`div`,me,[...l[0]||=[g(`i`,{"i-carbon-error":``,text:`5xl`,opacity:`50`},null,-1),g(`div`,{flex:`~ col`},[g(`span`,{text:`2xl`},`此设备不支持游戏手柄。`),g(`span`,{opacity:`70`},[h(`似乎你的设备不支持游戏手柄 API。查看`),g(`a`,{href:`https://caniuse.com/gamepad`},`这里`),h(`以查看支持游戏手柄的设备列表。`)])],-1)]]))]))}});export{_e as default};