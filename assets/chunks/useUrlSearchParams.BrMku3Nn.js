import{F as e,mt as t}from"./vue.CAJL2k56.js";import{t as n}from"./watchPausable.CLZhH2ih.js";import{t as r}from"./useEventListener.c80kvxRv.js";import{r as i}from"./configurable.CHIFr4yg.js";function a(a=`history`,o={}){let{initialValue:s={},removeNullishValues:c=!0,removeFalsyValues:l=!1,write:u=!0,writeMode:d=`replace`,window:f=i,stringify:p=e=>e.toString()}=o;if(!f)return t(s);let m=t({});function h(){if(a===`history`)return f.location.search||``;if(a===`hash`){let e=f.location.hash||``,t=e.indexOf(`?`);return t>0?e.slice(t):``}else return(f.location.hash||``).replace(/^#/,``)}function g(e){let t=p(e);if(a===`history`)return`${t?`?${t}`:``}${f.location.hash||``}`;if(a===`hash-params`)return`${f.location.search||``}${t?`#${t}`:``}`;let n=f.location.hash||`#`,r=n.indexOf(`?`);return r>0?`${f.location.search||``}${n.slice(0,r)}${t?`?${t}`:``}`:`${f.location.search||``}${n}${t?`?${t}`:``}`}function _(){return new URLSearchParams(h())}function v(e){let t=new Set(Object.keys(m));for(let n of e.keys()){let r=e.getAll(n);m[n]=r.length>1?r:e.get(n)||``,t.delete(n)}Array.from(t).forEach(e=>delete m[e])}let{pause:y,resume:b}=n(m,()=>{let e=new URLSearchParams(``);Object.keys(m).forEach(t=>{let n=m[t];Array.isArray(n)?n.forEach(n=>e.append(t,n)):c&&n==null||l&&!n?e.delete(t):e.set(t,n)}),x(e,!1)},{deep:!0});function x(t,n,r=!0){y(),n&&v(t),d===`replace`?f.history.replaceState(f.history.state,f.document.title,f.location.pathname+g(t)):r&&f.history.pushState(f.history.state,f.document.title,f.location.pathname+g(t)),e(()=>b())}function S(){u&&x(_(),!0,!1)}let C={passive:!0};r(f,`popstate`,S,C),a!==`history`&&r(f,`hashchange`,S,C);let w=_();return w.keys().next().value?v(w):Object.assign(m,s),m}export{a as t};