import{Ct as e,gt as t,yt as n}from"./vue.CAJL2k56.js";import{s as r}from"./is.CbRwWVeh.js";import{l as i}from"./general.BbmBTXVB.js";import{t as a}from"./until.9tXURh-t.js";function o(o,s,c){let{immediate:l=!0,delay:u=0,onError:d=globalThis.reportError??r,onSuccess:f=r,resetOnExecute:p=!0,shallow:m=!0,throwError:h}=c??{},g=m?n(s):t(s),_=n(!1),v=n(!1),y=n(void 0),b=0;async function x(t=0,...n){let r=b+=1;p&&(g.value=e(s)),y.value=void 0,_.value=!1,v.value=!0,t>0&&await i(t);let a=typeof o==`function`?o(...n):o;try{let e=await a;return r===b&&(g.value=e,_.value=!0),f(e),e}catch(e){if(r===b&&(y.value=e),d(e),h)throw e}finally{r===b&&(v.value=!1)}}l&&x(u);let S={state:g,isReady:_,isLoading:v,error:y,execute:x,executeImmediate:(...e)=>x(0,...e)};function C(){return new Promise((e,t)=>{a(v).toBe(!1).then(()=>e(S)).catch(t)})}return{...S,then(e,t){return C().then(e,t)}}}export{o as t};