import{td as e,th as t,v as n}from"./vue.DLm9j74-.js";import{u as r}from"./is.J6NoNqY_.js";import{t as i}from"./useCloned.ZW3Yyp73.js";function a(e){return e}function o(e,t){return e.value=t}function s(e){return e?typeof e==`function`?e:i:a}function c(e){return e?typeof e==`function`?e:i:a}function l(i,a={}){let{clone:l=!1,dump:u=s(l),parse:d=c(l),setSource:f=o}=a;function p(){return e({snapshot:u(i.value),timestamp:r()})}let m=t(p()),h=t([]),g=t([]),_=e=>{f(i,d(e.snapshot)),m.value=e},v=()=>{h.value.unshift(m.value),m.value=p(),a.capacity&&h.value.length>a.capacity&&h.value.splice(a.capacity,1/0),g.value.length&&g.value.splice(0,g.value.length)},y=()=>{h.value.splice(0,h.value.length),g.value.splice(0,g.value.length)},b=()=>{let e=h.value.shift();e&&(g.value.unshift(m.value),_(e))},x=()=>{let e=g.value.shift();e&&(h.value.unshift(m.value),_(e))},S=()=>{_(m.value)},C=n(()=>[m.value,...h.value]),w=n(()=>h.value.length>0),T=n(()=>g.value.length>0);return{source:i,undoStack:h,redoStack:g,last:m,history:C,canUndo:w,canRedo:T,clear:y,commit:v,reset:S,undo:b,redo:x}}export{l as t};