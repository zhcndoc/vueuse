import{tS as e,th as t,tv as n}from"./vue.DLm9j74-.js";import{s as r}from"./is.J6NoNqY_.js";import{l as i}from"./general.CPMlYMV9.js";import{t as a}from"./until.B-zpBbFI.js";function o(o,s,c){let{immediate:l=!0,delay:u=0,onError:d=globalThis.reportError??r,onSuccess:f=r,resetOnExecute:p=!0,shallow:m=!0,throwError:h}=c??{},g=m?n(s):t(s),_=n(!1),v=n(!1),y=n(void 0);async function b(t=0,...n){p&&(g.value=e(s)),y.value=void 0,_.value=!1,v.value=!0,t>0&&await i(t);let r=typeof o==`function`?o(...n):o;try{let e=await r;g.value=e,_.value=!0,f(e)}catch(e){if(y.value=e,d(e),h)throw e}finally{v.value=!1}return g.value}l&&b(u);let x={state:g,isReady:_,isLoading:v,error:y,execute:b,executeImmediate:(...e)=>b(0,...e)};function S(){return new Promise((e,t)=>{a(v).toBe(!1).then(()=>e(x)).catch(t)})}return{...x,then(e,t){return S().then(e,t)}}}export{o as t};