import{ft as e,gt as t,y as n}from"./vue.CAJL2k56.js";import{u as r}from"./is.CbRwWVeh.js";import{t as i}from"./useCloned.CeRQwYTr.js";function a(e){return e}function o(e,t){return e.value=t}function s(e){return e?typeof e==`function`?e:i:a}function c(e){return e?typeof e==`function`?e:i:a}function l(i,a={}){let{clone:l=!1,dump:u=s(l),parse:d=c(l),setSource:f=o}=a;function p(){return e({snapshot:u(i.value),timestamp:r()})}let m=t(p()),h=t([]),g=t([]),_=e=>{f(i,d(e.snapshot)),m.value=e};return{source:i,undoStack:h,redoStack:g,last:m,history:n(()=>[m.value,...h.value]),canUndo:n(()=>h.value.length>0),canRedo:n(()=>g.value.length>0),clear:()=>{h.value.splice(0,h.value.length),g.value.splice(0,g.value.length)},commit:()=>{h.value.unshift(m.value),m.value=p(),a.capacity&&h.value.length>a.capacity&&h.value.splice(a.capacity,1/0),g.value.length&&g.value.splice(0,g.value.length)},reset:()=>{_(m.value)},undo:()=>{let e=h.value.shift();e&&(g.value.unshift(m.value),_(e))},redo:()=>{let e=g.value.shift();e&&(h.value.unshift(m.value),_(e))}}}export{l as t};