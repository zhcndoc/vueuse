import{$ as e,Ct as t,y as n,yt as r}from"./vue.CAJL2k56.js";import{t as i}from"./tryOnScopeDispose.C50xVOZe.js";import{c as a,s as o}from"./is.CbRwWVeh.js";import{d as s}from"./general.BbmBTXVB.js";import{r as c}from"./configurable.CHIFr4yg.js";import{t as l}from"./unrefElement.BXTXpAEN.js";import{t as u}from"./useSupported.wZzSDbHl.js";function d(d,f,p={}){let{root:m,rootMargin:h,threshold:g=0,window:_=c,immediate:v=!0}=p,y=u(()=>_&&`IntersectionObserver`in _),b=n(()=>s(t(d)).map(l).filter(a)),x=o,S=r(v),C=y.value?e(()=>[b.value,l(m),t(h),S.value],([e,t,n])=>{if(x(),!S.value||!e.length)return;let r=new IntersectionObserver(f,{root:l(t),rootMargin:n,threshold:g});e.forEach(e=>e&&r.observe(e)),x=()=>{r.disconnect(),x=o}},{immediate:v,flush:`post`}):o,w=()=>{x(),C(),S.value=!1};return i(w),{isSupported:y,isActive:S,pause(){x(),S.value=!1},resume(){S.value=!0},stop:w}}export{d as t};