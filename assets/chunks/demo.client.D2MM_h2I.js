import{C as e,E as t,H as n,K as r,O as i,Ot as a,St as o,T as s,Tt as c,b as l,g as u,gt as d,nt as f,q as p,wt as m,x as h,y as g}from"./vue.CAJL2k56.js";import{t as _}from"./createEventHook.CZiZk_fv.js";import{t as v}from"./tryOnMounted.6dxedOfE.js";import{t as y}from"./useEventListener.c80kvxRv.js";import{n as ee}from"./configurable.CHIFr4yg.js";import{t as te}from"./useSupported.wZzSDbHl.js";import{t as b}from"./useRafFn.sH_0wwhz.js";function x(e){return g(()=>e.value?{buttons:{a:e.value.buttons[0],b:e.value.buttons[1],x:e.value.buttons[2],y:e.value.buttons[3]},bumper:{left:e.value.buttons[4],right:e.value.buttons[5]},triggers:{left:e.value.buttons[6],right:e.value.buttons[7]},stick:{left:{horizontal:e.value.axes[0],vertical:e.value.axes[1],button:e.value.buttons[10]},right:{horizontal:e.value.axes[2],vertical:e.value.axes[3],button:e.value.buttons[11]}},dpad:{up:e.value.buttons[12],down:e.value.buttons[13],left:e.value.buttons[14],right:e.value.buttons[15]},back:e.value.buttons[8],start:e.value.buttons[9]}:null)}function S(e={}){let{navigator:t=ee}=e,n=te(()=>t&&`getGamepads`in t),r=d([]),i=_(),a=_(),o=e=>{let t=[],n=`vibrationActuator`in e?e.vibrationActuator:null;return n&&t.push(n),e.hapticActuators&&t.push(...e.hapticActuators),{id:e.id,index:e.index,connected:e.connected,mapping:e.mapping,timestamp:e.timestamp,vibrationActuator:e.vibrationActuator,hapticActuators:t,axes:e.axes.map(e=>e),buttons:e.buttons.map(e=>({pressed:e.pressed,touched:e.touched,value:e.value}))}},{isActive:s,pause:c,resume:l}=b(()=>{let e=t?.getGamepads()||[];for(let t of e)t&&r.value[t.index]&&(r.value[t.index]=o(t))}),u=e=>{r.value.some(({index:t})=>t===e.index)||(r.value.push(o(e)),i.trigger(e.index)),l()},f=e=>{r.value=r.value.filter(t=>t.index!==e.index),a.trigger(e.index)},p={passive:!0};return y(`gamepadconnected`,e=>u(e.gamepad),p),y(`gamepaddisconnected`,e=>f(e.gamepad),p),v(()=>{let e=t?.getGamepads()||[];for(let t of e)t&&r.value[t.index]&&u(t)}),c(),{isSupported:n,onConnected:i.on,onDisconnected:a.on,gamepads:r,pause:c,resume:l,isActive:s}}var C={class:`fill-transparent`,width:`100%`,height:`100%`,viewBox:`0 0 404 309`},w={transform:`matrix(1,0,0,1,-50.8086,-83.6438)`},T={transform:`matrix(0.707107,-0.707107,0.707107,0.707107,-39.0605,310.248)`},E={id:`x`,transform:`matrix(1.23827,0,0,1.35378,-87.498,-88.0679)`},D={id:`a`,transform:`matrix(7.58222e-17,-1.23827,1.35378,8.28952e-17,64.6304,644.745)`},O={id:`b`,transform:`matrix(-1.23827,-1.51644e-16,1.6579e-16,-1.35378,797.443,492.617)`},k={id:`y`,transform:`matrix(-2.27467e-16,1.23827,-1.35378,-2.48686e-16,645.315,-240.196)`},A={transform:`matrix(1.12514,0,0,1.16981,-24.6477,-37.4718)`},j={"clip-path":`url(#_clip1)`},M={id:`left-joystick`,transform:`matrix(1.50628,0,0,1.50219,-76.2512,-107.713)`},N=[`cx`,`cy`],P={id:`select`,transform:`matrix(0.36945,-4.30683e-33,-4.30683e-33,0.384118,167.379,123.87)`},F={id:`start`,transform:`matrix(0.36945,-4.30683e-33,-4.30683e-33,0.384118,224.659,123.87)`},I={transform:`matrix(1.12514,0,0,1.16981,129.019,24.1131)`},L={"clip-path":`url(#_clip2)`},R={id:`right-joystick`,transform:`matrix(1.50628,0,0,1.50219,-76.2512,-107.713)`},z=[`cx`,`cy`],B={transform:`matrix(1.12514,0,0,1.16981,26.3142,27.0123)`},V={"clip-path":`url(#_clip3)`},H={id:`dpad-left`,transform:`matrix(0.778202,-0.748486,0.850796,0.818307,-304.224,296.899)`},U={id:`dpad-down`,transform:`matrix(-0.778202,-0.748486,0.850796,-0.818307,251.925,647.9)`},ne={id:`dpad-right`,transform:`matrix(-0.778202,0.748486,-0.850796,-0.818307,616.861,112.988)`},W={id:`dpad-up`,transform:`matrix(0.778202,0.748486,-0.850796,0.818307,60.7122,-238.013)`},G={id:`rb`,transform:`matrix(0.61812,0.0171064,-0.0276642,0.999617,259.736,-3.21975)`},K={id:`rt`,transform:`matrix(0.716144,0.0198192,-0.0244414,0.883165,143.069,9.76017)`},q={transform:`matrix(-1,0,0,1,497.232,0)`},J={id:`lb`,transform:`matrix(0.61812,0.0171064,-0.0276642,0.999617,259.736,-3.21975)`},Y={id:`lt`,transform:`matrix(0.716144,0.0198192,-0.0244414,0.883165,143.069,9.76017)`},X=.075,Z=i({__name:`Controller`,props:{gamepad:{}},setup(t){let{gamepad:r}=o(t),i=x(r),a=g(()=>i.value?Math.abs(i.value?.stick.left.horizontal)>X||Math.abs(i.value?.stick.left.vertical)>X:!1),s=g(()=>i.value?Math.abs(i.value?.stick.right.horizontal)>X||Math.abs(i.value?.stick.right.vertical)>X:!1);return(t,r)=>(n(),e(`svg`,C,[l(`g`,w,[r[9]||=l(`g`,{id:`path0`,transform:`matrix(1,0,0,1,52.8068,121.322)`},[l(`path`,{d:`M124.603,200L275.208,200L283.765,204.454C288.472,206.904 292.575,209.243 292.883,209.652C293.191,210.062 295.844,212.115 298.778,214.215C303.722,217.753 325.923,239.273 336.093,250.386C348.994,264.484 358.283,270.225 364.791,268.122C384.435,261.775 396.206,246.336 399.096,223.126C400.356,213 399.613,185.537 397.868,177.774C397.306,175.271 396.027,169.536 395.027,165.027C391.933,151.086 387.247,135.583 377.519,107.104C374.747,98.989 366.626,75.41 364.382,69.399C357.9,52.035 353.003,32.638 347.705,27.135C342.534,21.764 54.661,21.764 49.49,27.135C44.192,32.638 41.911,52.035 35.429,69.399C33.185,75.41 25.064,98.989 22.292,107.104C12.564,135.583 7.878,151.086 4.784,165.027C3.784,169.536 2.505,175.271 1.943,177.774C0.198,185.537 -0.545,213 0.715,223.126C3.605,246.336 15.376,261.775 35.02,268.122C41.528,270.225 50.817,264.484 63.718,250.386C73.888,239.273 96.089,217.753 101.033,214.215C103.967,212.115 106.62,210.062 106.928,209.652C107.236,209.243 111.339,206.904 116.046,204.454L124.603,200Z`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`4.17px`}})],-1),l(`g`,T,[l(`g`,E,[l(`path`,{class:c({"active-control":m(i)?.buttons.x.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,D,[l(`path`,{class:c({"active-control":m(i)?.buttons.a.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,O,[l(`path`,{class:c({"active-control":m(i)?.buttons.b.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,k,[l(`path`,{class:c({"active-control":m(i)?.buttons.y.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])]),l(`g`,A,[r[0]||=l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`}},null,-1),r[1]||=l(`clipPath`,{id:`_clip1`},[l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`})],-1),l(`g`,j,[l(`g`,M,[l(`ellipse`,{cx:154.401+(m(i)?.stick.left.horizontal||0)*4,cy:208.133+(m(i)?.stick.left.vertical||0)*4,rx:`15.341`,ry:`14.796`,class:c([`fill-transparent`,{"active-control":a.value}]),style:{stroke:`currentColor`,"stroke-width":`1.81px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,10,N)])]),r[2]||=l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`2.9px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,-1)]),l(`g`,null,[l(`g`,P,[l(`ellipse`,{class:c({"active-control":m(i)?.back.pressed}),cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{stroke:`currentColor`,"stroke-width":`8.29px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,F,[l(`ellipse`,{class:c({"active-control":m(i)?.start.pressed}),cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{stroke:`currentColor`,"stroke-width":`8.29px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])]),l(`g`,I,[r[3]||=l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`}},null,-1),r[4]||=l(`clipPath`,{id:`_clip2`},[l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`})],-1),l(`g`,L,[l(`g`,R,[l(`ellipse`,{cx:154.401+(m(i)?.stick.right.horizontal||0)*4,cy:208.133+(m(i)?.stick.right.vertical||0)*4,rx:`15.341`,ry:`14.796`,class:c({"active-control":s.value}),style:{stroke:`currentColor`,"stroke-width":`1.81px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,10,z)])]),r[5]||=l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`2.9px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,-1)]),l(`g`,B,[r[6]||=l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`}},null,-1),r[7]||=l(`clipPath`,{id:`_clip3`},[l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`})],-1),l(`g`,V,[l(`g`,H,[l(`path`,{class:c({"active-control":m(i)?.dpad.left.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,U,[l(`path`,{class:c({"active-control":m(i)?.dpad.down.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,ne,[l(`path`,{class:c({"active-control":m(i)?.dpad.right.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,W,[l(`path`,{class:c({"active-control":m(i)?.dpad.up.pressed}),d:`M354.907,196.001C345.094,196.001 337.14,203.277 337.14,212.252L354.907,212.252L354.907,196.001Z`,style:{stroke:`currentColor`,"stroke-width":`2.57px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])]),r[8]||=l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`2.9px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,-1)]),r[10]||=l(`g`,{transform:`matrix(1.12514,0,0,1.16981,179.092,-37.4718)`},[l(`ellipse`,{cx:`156.319`,cy:`204.944`,rx:`29.774`,ry:`28.637`,style:{fill:`none`,stroke:`currentColor`,"stroke-width":`2.9px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}})],-1),l(`g`,null,[l(`g`,null,[l(`g`,G,[l(`path`,{class:c({"active-control":m(i)?.bumper.right.pressed}),d:`M198.988,132.494C198.988,128.797 194.134,125.795 188.155,125.795L141.898,125.795C135.92,125.795 131.066,128.797 131.066,132.494C131.066,136.191 135.92,139.192 141.898,139.192L188.155,139.192C194.134,139.192 198.988,136.191 198.988,132.494Z`,style:{stroke:`currentColor`,"stroke-width":`4.01px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,K,[l(`path`,{class:c({"active-control":m(i)?.triggers.right.pressed}),d:`M321.473,92.294C321.473,84.798 313.967,78.712 304.723,78.712C295.478,78.712 287.973,84.798 287.973,92.294L287.973,114.931L321.473,114.931L321.473,92.294Z`,style:{stroke:`currentColor`,"stroke-width":`4.14px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])]),l(`g`,q,[l(`g`,J,[l(`path`,{class:c({"active-control":m(i)?.bumper.left.pressed}),d:`M198.988,132.494C198.988,128.797 194.134,125.795 188.155,125.795L141.898,125.795C135.92,125.795 131.066,128.797 131.066,132.494C131.066,136.191 135.92,139.192 141.898,139.192L188.155,139.192C194.134,139.192 198.988,136.191 198.988,132.494Z`,style:{stroke:`currentColor`,"stroke-width":`4.01px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)]),l(`g`,Y,[l(`path`,{class:c({"active-control":m(i)?.triggers.left.pressed}),d:`M321.473,92.294C321.473,84.798 313.967,78.712 304.723,78.712C295.478,78.712 287.973,84.798 287.973,92.294L287.973,114.931L321.473,114.931L321.473,92.294Z`,style:{stroke:`currentColor`,"stroke-width":`4.14px`,"stroke-linecap":`round`,"stroke-miterlimit":`1.5`}},null,2)])])])])]))}}),re={flex:`~ col`},ie={font:`medium mono`},ae={font:`medium`,text:`sm dark-50 opacity-80 dark:light-900 dark:opacity-50`},Q=i({__name:`Item`,props:{label:{}},setup(t){return(r,i)=>(n(),e(`div`,re,[l(`span`,ie,[p(r.$slots,`default`)]),l(`span`,ae,a(t.label),1)]))}}),oe={bg:`dark:dark-500 light-100`,shadow:`~ md`,border:`rounded`,"max-w":`screen-lg`,mx:`auto`,overflow:`hidden`,grid:`~`,class:`grid-cols-[2fr,1fr]`},se={p:`4`},ce={font:`medium`,text:`xl`},le={flex:`~ row wrap`,gap:`x-4`,mt:`4`},ue={flex:`~ row wrap`,gap:`y-4 x-4`,py:`2`},de={flex:`~ row wrap`,gap:`y-4 x-4`,py:`2`},fe=[`disabled`],pe={flex:`~ row shrink-none`,place:`items-center content-center`,p:`8`,bg:`dark:dark-900 light-400`},$={key:1,"font-medium":``,text:`dark:light-900 dark:opacity-70`},me=i({__name:`Gamepad`,props:{gamepad:{}},setup(i){let o=i,c=g(()=>o.gamepad?.hapticActuators?.length>0);function d(){c.value&&o.gamepad.hapticActuators[0].playEffect(`dual-rumble`,{startDelay:0,duration:1e3,weakMagnitude:1,strongMagnitude:1})}return(o,p)=>(n(),e(`div`,oe,[l(`div`,se,[l(`div`,ce,a(i.gamepad.id),1),l(`div`,le,[t(Q,{label:`Index`},{default:f(()=>[s(a(i.gamepad.index),1)]),_:1}),t(Q,{label:`Connected`},{default:f(()=>[s(a(i.gamepad.connected),1)]),_:1}),t(Q,{label:`Mapping`},{default:f(()=>[s(a(i.gamepad.mapping||`N/A`),1)]),_:1}),t(Q,{label:`Timestamp`},{default:f(()=>[s(a(i.gamepad.timestamp.toFixed(0)),1)]),_:1})]),p[0]||=l(`div`,{font:`medium`,mt:`4`},` Buttons `,-1),l(`div`,ue,[(n(!0),e(u,null,r(i.gamepad.buttons,(e,t)=>(n(),h(Q,{key:t,p:`x-2 y-1`,border:`rounded`,bg:`dark:dark-700 light-500`,label:`B${t}`},{default:f(()=>[s(a(e.value.toFixed(2)),1)]),_:2},1032,[`label`]))),128))]),p[1]||=l(`div`,{font:`medium`,mt:`4`},` Axes `,-1),l(`div`,de,[(n(!0),e(u,null,r(i.gamepad.axes,(e,t)=>(n(),h(Q,{key:t,p:`x-2 y-1`,border:`rounded`,bg:`dark:dark-700 light-500`,label:`Axis ${t}`},{default:f(()=>[s(a(e.toFixed(2)),1)]),_:2},1032,[`label`]))),128))]),l(`button`,{disabled:!c.value,onClick:d},` Vibrate `,8,fe)]),l(`div`,pe,[i.gamepad.mapping===`standard`?(n(),h(Z,{key:0,gamepad:i.gamepad,text:`dark-100 opacity-70 dark:light-900 dark:opacity-70`},null,8,[`gamepad`])):(n(),e(`span`,$,` Unknown Controller Type `))])]))}}),he={key:0,flex:`~ row`,place:`items-center content-center`,items:`center`,space:`x-4`},ge={key:1,flex:`~ row`,place:`items-center content-center`,items:`center`,space:`x-4`},_e={key:2,space:`y-4`},ve=i({__name:`demo.client`,setup(t){let{isSupported:i,gamepads:a}=S();return(t,o)=>(n(),e(`div`,null,[m(i)?m(a).length===0?(n(),e(`div`,ge,[...o[1]||=[l(`i`,{"i-carbon-game-console":``,text:`5xl`,opacity:`50`},null,-1),l(`div`,{flex:`~ col`},[l(`span`,{text:`2xl`},`未检测到游戏手柄`),l(`span`,{opacity:`50`},`确保你的游戏手柄已连接，并按下按钮唤醒它。`)],-1)]])):(n(),e(`div`,_e,[(n(!0),e(u,null,r(m(a),e=>(n(),h(me,{key:e.id,gamepad:e},null,8,[`gamepad`]))),128))])):(n(),e(`div`,he,[...o[0]||=[l(`i`,{"i-carbon-error":``,text:`5xl`,opacity:`50`},null,-1),l(`div`,{flex:`~ col`},[l(`span`,{text:`2xl`},`此设备不支持游戏手柄。`),l(`span`,{opacity:`70`},[s(`似乎你的设备不支持游戏手柄 API。查看`),l(`a`,{href:`https://caniuse.com/gamepad`},`这里`),s(`以查看支持游戏手柄的设备列表。`)])],-1)]]))]))}});export{ve as default};